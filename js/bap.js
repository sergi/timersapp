"use strict";define(["require","receiptverifier","./install-button","layouts/layouts","./button"],function(e){function s(){for(var e in r){var t=r[e];if(!t.running)continue;var i=Date.now()-t.startTime;if(i>t.maxTime)"vibrate"in navigator&&navigator.vibrate([200,200,200,200,200]),n.play(),delete r[e];else{var s=t.maxTime-i;t.caption=Math.floor(s/1e3)}}}function o(e){document.getElementById("screen_timers").style.display="none",document.getElementById("screen_about").style.display="none",document.getElementById("screen_choose").style.display="none",document.getElementById(e).style.display="block"}function u(e){var t=e.target;if(t.className.indexOf("punch")>-1){var u=r[t.getAttribute("id")];if(u.running===!0){u.reset(u.maxTime/1e3);for(var a in r)if(r[a].running)return;n.pause(),clearInterval(i),i=null}else u.settable?o("screen_choose"):u.maxTime&&(u.start(),i||(i=setInterval(s,100)))}}e("receiptverifier"),e("./install-button"),e("layouts/layouts");var t=e("./button"),n=new Audio("alarm.wav");n.loop=!0;var r={},i;document.body.addEventListener("click",u);var a=document.body.getElementsByTagName("button");for(var f=0;f<a.length;f++){var l=a[f].id,c=a[f].getAttribute("data-settable"),h=null;if(!c){var p=a[f].getAttribute("data-time");h=parseInt(p,10)*60*1e3}console.log(c,h),r[l]=new t(l,h)}})